
<div>
	<h2>Profile</h2>
	<br>
	<div class="row">
		<div class="col-xl-4 ml-5">
			<img src="assets/profilepic.png"
				class="prof-pic-medium border border-dark">
		</div>
		<div class="col" *ngIf="user">
			<div class="row mr-4">
				<div class="col">
					<div>
						<h4>User info</h4>
						<div class="row border border-dark"></div>
						<br>
						<form [formGroup]="userInfoEdit"
							(ngSubmit)="save(userInfoEdit.value)">
							<div class="form-group">
								<label for="i_name">First Name:</label>
								<div class="user-data ml-3" [hidden]="editMode">{{user.firstName}}</div>
								<input [hidden]="!editMode" type="text" id="i_name"
									placeholder="First Name" formControlName="firstName"
									class="form-control">
								<div
									*ngIf="firstName.invalid && (firstName.dirty || firstName.touched)"
									class="alert alert-danger">
									<div *ngIf="firstName.errors.required">First name is
										required.</div>
									<div *ngIf="firstName.errors.minlength">Length must be
										higher than {{firstName.errors.minlength.requiredLength}}.</div>
								</div>
							</div>
							<div class="form-group">
								<label for="i_name">Last Name:</label>
								<div class="user-data ml-3" [hidden]="editMode">{{user.lastName}}</div>
								<input [hidden]="!editMode" type="text" id="i_name"
									placeholder="Last Name" formControlName="lastName"
									class="form-control">
								<div
									*ngIf="lastName.invalid && (lastName.dirty || lastName.touched)"
									class="alert alert-danger">
									<div *ngIf="lastName.errors.required">Last name is
										required.</div>
									<div *ngIf="lastName.errors.minlength">Length must be
										higher than {{lastName.errors.minlength.requiredLength}}.</div>
								</div>
							</div>
							<div class="form-group">
								<label for="i_name">Email:</label>
								<div class="user-data ml-3" [hidden]="editMode">{{user.email}}</div>
								<input [hidden]="!editMode" type="text" id="i_name"
									placeholder="Email" formControlName="email"
									class="form-control">
								<div *ngIf="email.invalid && (email.dirty || email.touched)"
									class="alert alert-danger">
									<div *ngIf="email.errors.required">Email is required.</div>
									<div *ngIf="email.errors.email">Please enter valid email</div>
								</div>
							</div>
							<button type="submit" id="form"
								class="btn btn-md btn-outline-primary float-right"
								[hidden]="!editMode">Save</button>

						</form>
						<button id="edit"
							class="btn btn-md btn-outline-primary float-right"
							[hidden]="editMode" (click)="edit()">Edit</button>
						<br>
					</div>
					<div>
						<h4>Password change</h4>
						<div class="row border border-dark"></div>
						<br>
						<div *ngIf="passError" class="alert alert-danger">
							Wrong password
						</div>
						<form [formGroup]="passReset" [hidden]="!changePassActive"
							(ngSubmit)="changePass(passReset.value)">
							<!-- password -->
							<div class="form-group">
								<label for="i_password">Old password</label> <input type="text"
									id="i_oldPassword" placeholder="Old Password"
									formControlName="oldPassword" class="form-control">
								<div
									*ngIf="oldPassword.invalid && (oldPassword.dirty || oldPassword.touched)"
									class="alert alert-danger">
									<div *ngIf="oldPassword.errors.required">Old password is
										required.</div>
								</div>
							</div>
							<!-- password -->
							<div class="form-group">
								<label for="i_password">New Password</label> <input type="text"
									id="i_password" placeholder="New Password"
									formControlName="password" class="form-control">
								<div
									*ngIf="password.invalid && (password.dirty || password.touched)"
									class="alert alert-danger">
									<div *ngIf="password.errors.required">New Password is
										required.</div>
								</div>
							</div>
							<!-- password -->
							<div class="form-group">
								<label for="i_password">Repeat New Password</label> <input
									type="text" id="i_rpassword" placeholder="Repeat password"
									formControlName="rPassword" class="form-control">
								<div
									*ngIf="rPassword.invalid && (rPassword.dirty || rPassword.touched)"
									class="alert alert-danger">
									<div *ngIf="rPassword.errors.required">Repeat new
										password is required.</div>
									<div [hidden]="!rPassword.hasError('mismatchedPassword')">The
										passwords must match</div>
								</div>
							</div>
							<button type="submit" id="form"
								class="btn btn-md btn-outline-primary float-right"
								[hidden]="!changePassActive">Save</button>
						</form>
						<div class="row">
							<div class="col">
								<button id="edit"
									class="btn btn-md btn-outline-primary float-left"
									[hidden]="changePassActive" (click)="changePassVisibility()">Change
									Password</button>
							</div>

							<div class="col">
								<button id="edit"
									class="btn btn-md btn-outline-primary float-right"
									[hidden]="changePassActive" (click)="resetPass()" >Reset password</button>
							</div>
						</div>
					</div>
				</div>


			</div>

		</div>
	</div>
</div>